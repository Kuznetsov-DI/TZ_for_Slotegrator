package service;

import config.ApiConfig;
import constant.HeaderParameters;
import dto.request.PlayerCreationRequest;
import io.qameta.allure.Step;
import io.restassured.response.ValidatableResponse;

import static io.restassured.RestAssured.given;

public class PlayerService extends ApiConfig {

    public static final String PLAYERS_PATH = "/v2/players";

    @Step("Регистрация нового игрока с именем пользователя - {request.username}")
    public ValidatableResponse postNewPlayerCreation(PlayerCreationRequest request, String token) {

        return given(getRequestSpecification())
                .header(HeaderParameters.AUTH_KEY_PARAM, token)
                .when()
                .body(request)
                .post(PLAYERS_PATH)
                .then();
    }

    @Step("Получение данных профиля игрока по id - {id}")
    public ValidatableResponse getPlayerDataById(Integer id, String token) {

        return given(getRequestSpecification())
                .header(HeaderParameters.AUTH_KEY_PARAM, token)
                .when()
                .get(PLAYERS_PATH + "/" + id)
                .then();
    }
}
